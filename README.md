<img width="466" src="https://raw.githubusercontent.com/objectbox/objectbox-java/master/logo.png">

# Do you ♥️ using ObjectBox?

[![Follow ObjectBox on Twitter](https://img.shields.io/twitter/follow/ObjectBox_io.svg?style=flat-square&logo=twitter&color=fff)](https://twitter.com/ObjectBox_io)

We want to [hear about your project](https://docs.google.com/forms/d/e/1FAIpQLScIYiOIThcq-AnDVoCvnZOMgxO4S-fBtDSFPQfWldJnhi2c7Q/viewform)!
It will - literally - take just a minute, but help us a lot. Thank you!​ 🙏​

# ObjectBox Generator

ObjectBox is a superfast object-oriented database with strong relation support. ObjectBox is embedded into your Android, Linux, macOS, or Windows app.

ObjectBox Generator takes over the burden of writing the C/C++ binding code for ObjectBox, greatly simplifying the model declaration and FlatBuffers serialization, allowing you to concentrate on the actual application logic.

All the generated code is header-only and compatible with the existing ObjectBox C-API so you can take advantage of the new features while incrementally porting your existing code.

## Prerequisites/Installation

1. You need to have [ObjectBox-C](https://github.com/objectbox/objectbox-c) library installed to use code generated by ObjectBox Generator in your project. Please follow the [installation instructions](https://github.com/objectbox/objectbox-c#usage-and-installation).

2. Install the objectbox-generator: download the latest binary for your OS: [Releases](https://github.com/objectbox/objectbox-generator/releases/latest) and add it to $PATH for a convenient use.

3. Get FlatBuffers library, depending on whether you use C or C++
    * For C: get [flatc library and headers](https://github.com/dvidelabs/flatcc)
    * For C++: get [flatbuffers headers](https://github.com/google/flatbuffers/tree/v1.12.0/include/flatbuffers); the library is included within objectbox-c library (.so/.dll) so you don't need to link to it separately.

## Getting started

ObjectBox Generator uses FlatBuffer schema file (.fbs) as a source. It stores the model information within a model JSON file known from other ObjectBox language bindings (objectbox-model.json) and generates code based on the selected language - C or C++.

Let’s have a look at a sample schema (`tasklist.fbs`) and how Generator helps us.

```text
table Task {
    id: ulong;
    text: string;
    date_created: ulong;
    date_finished: ulong;
}
```

### For C++ projects

We generate the binding code for C++ by running `objectbox-generator -cpp tasklist.fbs` and we get the following files:

* objectbox-model.h
* objectbox-model.json
* tasklist-cpp.obx.h

> Note: you should add all these files to your source control (e.g. git), most importantly the objectbox-model.json which ensures compatibility with previous versions of your database after you make changes to the schema.

Now in your application, you can include the headers and start to work with your database. Consider the following `main.cpp`:
```cpp
#include "objectbox-cpp.h"
#include "objectbox-model.h"
#include "tasklist-cpp.obx.h"

int main(int argc, char* args[]) {
    // create_obx_model() provided by objectbox-model.h
    // obx interface contents provided by objectbox-ext.h
    obx::Store store(create_obx_model());
    obx::Box<Task> box(store);

    obx_id id = box.put({.text = "Buy milk"});  // Create
    std::unique_ptr<Task> task = box.get(id);   // Read
    if (task) {
        task->text += " & some bread";
        box.put(*task);                         // Update
        box.remove(id);                         // Delete
    }
    ...
}
```

### For C projects

TODO